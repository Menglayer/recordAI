# 仪表盘使用指南

## 📊 概述

仪表盘是 MyLedger 的核心功能，提供专业的资产净值计算、盈亏分析和数据可视化。

---

## 🎯 核心功能

### 1. 净值计算

**计算逻辑**:
```
Total Net Worth = Σ (Quantity × Price)
```

**价格匹配规则**:
1. 优先使用快照当天的价格
2. 如果当天没有价格，使用最近的历史价格（不晚于快照日期）
3. 如果没有任何价格记录，该资产价值为 0

### 2. 盈亏计算

**Real PnL 公式**:
```
Unrealized PnL = Current Net Worth - Net Investment
Net Investment  = Total Deposits - Total Withdrawals
ROI %           = (Unrealized PnL / Net Investment) × 100%
```

**示例**:
```
场景 1: 只有投资收益
- 净值: $15,000
- 净投入: $10,000 (入金 $10,000, 出金 $0)
- 盈亏: $5,000
- 收益率: 50%

场景 2: 有追加投资
- 净值: $15,000
- 净投入: $12,000 (入金 $15,000, 出金 $3,000)
- 盈亏: $3,000
- 收益率: 25%
```

---

## 📈 指标说明

### 💎 总净值 (Total Net Worth)
- **含义**: 所有资产的当前总价值
- **计算**: 基于最新快照日期
- **公式**: Σ (数量 × 价格)

### 💰 总投入 (Total Invested)
- **含义**: 净投入本金
- **计算**: 总入金 - 总出金
- **Delta**: 显示入金和出金明细

### 📈 总盈亏 (Unrealized PnL)
- **含义**: 未实现的盈亏
- **计算**: 净值 - 净投入
- **颜色**: 绿色(盈利) / 红色(亏损)

### 🎯 收益率 (ROI)
- **含义**: 投资回报率
- **计算**: (盈亏 / 净投入) × 100%
- **Delta**: 盈利/亏损/持平状态

---

## 📊 可视化图表

### 图表 1: 资产分布 (By Symbol)

**展示内容**:
- 按资产代码汇总价值
- 甜甜圈饼图显示占比
- 鼠标悬停查看详细价值

**用途**:
- 了解资产配置结构
- 识别重仓资产
- 评估分散化程度

**详细数据**:
- 点击"查看详细数据"展开表格
- 显示各资产的总数量和总价值

### 图表 2: 账户分布 (By Account)

**展示内容**:
- 按账户名称汇总价值
- 饼图显示账户占比
- 包含交易所、钱包、券商等

**用途**:
- 了解资产存放位置
- 评估账户集中度
- 管理多账户配置

### 图表 3: 净值历史走势 (Net Worth History)

**展示内容**:
- 时间序列折线图
- 每个快照日期的净值
- 填充区域增强视觉效果

**额外统计**:
- 📊 历史最高净值
- 📉 历史最低净值
- 📈 总增长（金额和百分比）

**最低要求**:
- 至少需要 2 个快照记录才能显示
- 建议定期记录快照以获得有意义的趋势

---

## 📋 持仓明细表

**显示字段**:
- 账户: 资产所在账户
- 资产: 资产代码
- 数量: 持仓数量
- 单价: 当前/最近价格
- 价值: 数量 × 单价

**用途**:
- 查看所有持仓细节
- 核对数据准确性
- 导出分析使用

---

## 💡 使用场景

### 场景 1: 每日净值查看

**流程**:
1. 打开应用 → 仪表盘
2. 查看总净值和收益率
3. 检查资产和账户分布
4. 查看持仓明细

**频率**: 每天

### 场景 2: 每周绩效分析

**流程**:
1. 查看净值历史走势图
2. 对比本周与上周的变化
3. 分析盈亏原因
4. 调整投资策略

**频率**: 每周

### 场景 3: 资产再平衡

**流程**:
1. 查看资产分布饼图
2. 识别过度集中的资产
3. 决定是否需要再平衡
4. 执行交易并记录新快照

**频率**: 每月或按需

### 场景 4: 账户安全检查

**流程**:
1. 查看账户分布饼图
2. 确认各账户价值正常
3. 对比实际余额
4. 发现异常及时处理

**频率**: 每周

---

## ⚠️ 注意事项

### 1. 价格数据的重要性

**问题**: 如果没有价格数据，净值计算会不准确

**解决方案**:
- 定期使用价格服务更新价格
- 确保所有持仓资产都有价格记录
- 在录入快照后立即更新价格

### 2. 转账记录的必要性

**问题**: 没有转账记录会导致收益率计算错误

**示例**:
```
错误场景:
- 今天净值 $15,000
- 昨天净值 $10,000
- 没有转账记录
- 系统认为盈利 50% ❌

正确场景:
- 今天净值 $15,000
- 昨天净值 $10,000
- 今天入金 $5,000 (已记录)
- 实际收益 $0 (持平) ✓
```

**解决方案**:
- 每次入金/出金后立即记录
- 定期检查转账记录完整性

### 3. 快照频率建议

**最低要求**: 至少每周一次
**推荐频率**: 每天一次（如有变动）
**最佳实践**: 每次交易后更新

**原因**:
- 更频繁的快照能提供更准确的历史走势
- 便于追踪资产变化
- 有助于分析投资决策效果

---

## 🔍 数据解读

### 解读 1: 正收益 vs 负收益

```
正收益 (绿色):
- ROI > 0%
- 净值 > 净投入
- 投资获利

负收益 (红色):
- ROI < 0%
- 净值 < 净投入
- 投资亏损

持平 (灰色):
- ROI = 0%
- 净值 = 净投入
- 无盈亏
```

### 解读 2: 资产集中度

```
高度集中:
- 单一资产占比 > 50%
- 风险较高
- 建议分散

适度分散:
- 前三大资产占比 < 70%
- 风险适中
- 较为平衡

高度分散:
- 单一资产占比 < 20%
- 风险较低
- 管理复杂
```

### 解读 3: 历史走势

```
上涨趋势:
- 净值持续增长
- 投资表现良好
- 继续持有或扩大仓位

下跌趋势:
- 净值持续下降
- 需要评估原因
- 考虑止损或调整策略

震荡趋势:
- 净值上下波动
- 市场不确定
- 保持观望或定投
```

---

## 🚀 进阶技巧

### 技巧 1: 利用快照对比

```
对比不同日期的快照:
1. 查看净值历史图表
2. 识别关键时间点
3. 分析变化原因
4. 总结经验教训
```

### 技巧 2: 组合收益率分解

```
总收益率 = 资产收益 + 配置收益

示例:
- BTC 上涨 50%，持仓占比 60%
- ETH 上涨 30%，持仓占比 40%
- 组合收益 = 50% × 60% + 30% × 40% = 42%
```

### 技巧 3: 定期导出数据

```
导出持仓明细表:
1. 复制表格数据
2. 粘贴到 Excel
3. 添加自定义分析
4. 生成投资报告
```

---

## 📊 最佳实践

1. **每日查看**: 养成每天查看仪表盘的习惯
2. **定期更新**: 确保价格数据每天更新
3. **记录转账**: 每次资金进出立即记录
4. **保留快照**: 不要删除历史快照记录
5. **分析趋势**: 每周分析一次净值趋势
6. **调整策略**: 根据数据反馈优化投资

---

## 🔗 相关功能

- **数据录入**: 记录快照和转账
- **价格服务**: 自动更新资产价格
- **数据查看**: 查看历史记录

---

**版本**: v1.2.0  
**更新日期**: 2026-01-06  
**功能状态**: ✅ 完全可用

---

**提示**: 仪表盘是数据驱动的，数据质量决定分析质量。确保数据准确、及时、完整！📊
